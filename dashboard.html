<!DOCTYPE html>
<html class="dark" lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>FROST-T Dashboard | Threshold Signature Protocol</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Noto+Sans:wght@400;500;700&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#19e66b",
                        "background-light": "#f6f8f7",
                        "background-dark": "#112117",
                        "surface-dark": "#1a2e22",
                        "border-dark": "#2d4a37",
                    },
                    fontFamily: {
                        "display": ["Space Grotesk", "sans-serif"],
                        "body": ["Noto Sans", "sans-serif"],
                    },
                    borderRadius: {
                        "DEFAULT": "0.375rem",
                        "lg": "0.5rem",
                        "xl": "0.75rem",
                    }
                },
            },
        }
    </script>
    <style>
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 1, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }
        body {
            font-family: "Space Grotesk", sans-serif;
        }

        /* Animation for new events */
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-10px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .new-event {
            animation: slideIn 0.3s ease-out;
        }

        /* Pulse animation for status dot */
        @keyframes pulse-green {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }

        .pulse-green {
            animation: pulse-green 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark text-slate-900 dark:text-white antialiased min-h-screen flex overflow-hidden">
    <!-- Sidebar -->
    <aside class="w-64 flex flex-col border-r border-slate-200 dark:border-border-dark bg-white dark:bg-background-dark shrink-0 h-screen sticky top-0">
        <div class="h-16 flex items-center px-6 border-b border-slate-200 dark:border-border-dark">
            <div class="flex items-center gap-2 text-primary">
                <span class="material-symbols-outlined text-3xl">token</span>
                <span class="text-xl font-bold tracking-tight text-slate-900 dark:text-white">FROST-T</span>
            </div>
        </div>
        <nav class="flex-1 overflow-y-auto py-6 px-4 space-y-1">
            <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg bg-primary/10 text-primary dark:text-primary group" href="#">
                <span class="material-symbols-outlined text-[22px]">dashboard</span>
                <span class="text-sm font-semibold">Dashboard</span>
            </a>
            <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-surface-dark group transition-colors" href="#">
                <span class="material-symbols-outlined text-[22px] group-hover:text-slate-900 dark:group-hover:text-white">hub</span>
                <span class="text-sm font-medium">Signers</span>
            </a>
            <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-surface-dark group transition-colors" href="#">
                <span class="material-symbols-outlined text-[22px] group-hover:text-slate-900 dark:group-hover:text-white">receipt_long</span>
                <span class="text-sm font-medium">Event Logs</span>
            </a>
            <a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-surface-dark group transition-colors" href="#">
                <span class="material-symbols-outlined text-[22px] group-hover:text-slate-900 dark:group-hover:text-white">settings</span>
                <span class="text-sm font-medium">Settings</span>
            </a>
        </nav>
        <div class="p-4 border-t border-slate-200 dark:border-border-dark">
            <div class="flex items-center gap-3 px-3 py-2">
                <div class="w-8 h-8 rounded bg-primary/20 flex items-center justify-center text-primary font-bold text-sm">FT</div>
                <div class="flex flex-col">
                    <span class="text-xs font-semibold text-slate-900 dark:text-white">FROST Terminal</span>
                    <span class="text-[10px] text-slate-500 dark:text-slate-400">v0.1.0</span>
                </div>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 flex flex-col h-screen overflow-hidden">
        <!-- Header -->
        <header class="h-16 flex items-center justify-between px-8 border-b border-slate-200 dark:border-border-dark bg-white dark:bg-background-dark shrink-0">
            <div class="flex items-center gap-4">
                <h1 class="text-lg font-bold text-slate-900 dark:text-white">Live Transmission Monitor</h1>
                <span id="connection-badge" class="px-2 py-0.5 rounded text-[11px] font-bold bg-green-500/10 text-green-500 border border-green-500/20">
                    <span class="inline-block w-1.5 h-1.5 bg-green-500 rounded-full mr-1 pulse-green"></span>
                    CONNECTED
                </span>
            </div>
            <div class="flex items-center gap-3">
                <button class="h-9 px-3 flex items-center gap-2 rounded-lg text-slate-500 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-surface-dark transition-colors text-sm font-medium">
                    <span class="material-symbols-outlined text-[20px]">wifi</span>
                    <span id="header-rssi">-50 dBm</span>
                </button>
                <button class="h-9 px-3 flex items-center gap-2 rounded-lg text-slate-500 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-surface-dark transition-colors text-sm font-medium">
                    <span class="material-symbols-outlined text-[20px]">schedule</span>
                    <span id="header-latency">500ms</span>
                </button>
            </div>
        </header>

        <!-- Scrollable Area -->
        <div class="flex-1 overflow-y-auto bg-slate-50 dark:bg-[#0c1610] p-8">
            <div class="max-w-[1200px] mx-auto space-y-6">
                <!-- Hero Status Section -->
                <div class="rounded-xl border border-slate-200 dark:border-border-dark bg-white dark:bg-surface-dark overflow-hidden shadow-sm">
                    <div class="p-6 md:p-8 flex flex-col md:flex-row items-start md:items-center justify-between gap-6">
                        <div class="space-y-2">
                            <div class="flex items-center gap-3">
                                <span class="flex h-3 w-3 relative">
                                    <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75"></span>
                                    <span class="relative inline-flex rounded-full h-3 w-3 bg-primary"></span>
                                </span>
                                <h2 class="text-sm font-bold tracking-widest text-slate-500 uppercase">Current Phase</h2>
                            </div>
                            <p id="current-phase" class="text-4xl md:text-5xl font-bold text-slate-900 dark:text-white tracking-tight">IDLE</p>
                            <p class="text-slate-500 dark:text-slate-400 max-w-lg text-lg">
                                <span id="phase-description">Ready to initiate threshold signature generation. Waiting for coordinator command via LoRa transport layer.</span>
                            </p>
                        </div>
                        <div class="flex flex-col gap-3 w-full md:w-auto">
                            <div class="bg-primary/10 border border-primary/20 text-primary font-bold py-3 px-6 rounded-lg flex items-center justify-center gap-2">
                                <span class="material-symbols-outlined">bolt</span>
                                <span>Live Monitoring</span>
                            </div>
                        </div>
                    </div>

                    <!-- Progress Bar -->
                    <div class="px-6 pb-8 md:px-8">
                        <div class="flex justify-between items-end mb-2">
                            <span class="text-sm font-medium text-slate-700 dark:text-slate-300">Transmission Progress</span>
                            <span id="progress-text" class="text-sm font-mono text-slate-500">0%</span>
                        </div>
                        <div class="w-full bg-slate-100 dark:bg-background-dark rounded h-2 overflow-hidden">
                            <div id="progress-fill" class="bg-primary h-full rounded transition-all duration-300" style="width: 0%"></div>
                        </div>
                        <div class="mt-2 text-xs text-slate-400 font-mono">
                            <span id="total-messages-inline">0</span> messages Â·
                            <span id="total-bytes-inline">0</span> bytes transmitted
                        </div>
                    </div>
                </div>

                <!-- Stats Grid -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <!-- Stat Card 1: Signal Strength -->
                    <div class="p-6 rounded-xl border border-slate-200 dark:border-border-dark bg-white dark:bg-surface-dark shadow-sm flex flex-col justify-between h-32">
                        <div class="flex justify-between items-start">
                            <span class="text-sm font-medium text-slate-500 dark:text-slate-400">Signal Strength (LoRa)</span>
                            <span class="material-symbols-outlined text-slate-300 dark:text-slate-600">signal_cellular_alt</span>
                        </div>
                        <div class="flex items-baseline gap-2">
                            <span id="rssi-value" class="text-3xl font-bold text-slate-900 dark:text-white">-80</span>
                            <span class="text-sm text-primary font-medium">dBm</span>
                        </div>
                    </div>

                    <!-- Stat Card 2: Total Bytes -->
                    <div class="p-6 rounded-xl border border-slate-200 dark:border-border-dark bg-white dark:bg-surface-dark shadow-sm flex flex-col justify-between h-32">
                        <div class="flex justify-between items-start">
                            <span class="text-sm font-medium text-slate-500 dark:text-slate-400">Data Transmitted</span>
                            <span class="material-symbols-outlined text-slate-300 dark:text-slate-600">cloud_upload</span>
                        </div>
                        <div class="flex items-baseline gap-2">
                            <span id="total-bytes" class="text-3xl font-bold text-slate-900 dark:text-white tabular-nums">0</span>
                            <span class="text-sm text-primary font-medium">bytes</span>
                        </div>
                    </div>

                    <!-- Stat Card 3: Packet Loss -->
                    <div class="p-6 rounded-xl border border-slate-200 dark:border-border-dark bg-white dark:bg-surface-dark shadow-sm flex flex-col justify-between h-32">
                        <div class="flex justify-between items-start">
                            <span class="text-sm font-medium text-slate-500 dark:text-slate-400">Packet Retries</span>
                            <span class="material-symbols-outlined text-slate-300 dark:text-slate-600">sync_problem</span>
                        </div>
                        <div class="flex items-baseline gap-2">
                            <span id="packet-loss" class="text-3xl font-bold text-slate-900 dark:text-white">0</span>
                            <span class="text-sm text-slate-400 font-medium">retries</span>
                        </div>
                    </div>
                </div>

                <!-- Additional Stats Row -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="p-4 rounded-lg border border-slate-200 dark:border-border-dark bg-white dark:bg-surface-dark">
                        <div class="text-xs text-slate-500 dark:text-slate-400 mb-1">Messages</div>
                        <div id="total-messages" class="text-2xl font-bold text-slate-900 dark:text-white tabular-nums">0</div>
                    </div>
                    <div class="p-4 rounded-lg border border-slate-200 dark:border-border-dark bg-white dark:bg-surface-dark">
                        <div class="text-xs text-slate-500 dark:text-slate-400 mb-1">Success Rate</div>
                        <div id="success-rate" class="text-2xl font-bold text-primary tabular-nums">100%</div>
                    </div>
                    <div class="p-4 rounded-lg border border-slate-200 dark:border-border-dark bg-white dark:bg-surface-dark">
                        <div class="text-xs text-slate-500 dark:text-slate-400 mb-1">Avg Latency</div>
                        <div id="avg-latency" class="text-2xl font-bold text-slate-900 dark:text-white tabular-nums">0ms</div>
                    </div>
                    <div class="p-4 rounded-lg border border-slate-200 dark:border-border-dark bg-white dark:bg-surface-dark">
                        <div class="text-xs text-slate-500 dark:text-slate-400 mb-1">Total Retries</div>
                        <div id="total-retries" class="text-2xl font-bold text-orange-500 tabular-nums">0</div>
                    </div>
                </div>

                <!-- CLI Output Terminal -->
                <div class="rounded-xl border border-slate-200 dark:border-border-dark bg-white dark:bg-surface-dark shadow-sm">
                    <div class="px-6 py-4 border-b border-slate-200 dark:border-border-dark flex justify-between items-center">
                        <h3 class="font-bold text-slate-900 dark:text-white flex items-center gap-2">
                            <span class="material-symbols-outlined text-primary">terminal</span>
                            CLI Output
                        </h3>
                        <span id="cli-line-count" class="text-xs font-medium text-primary">0 lines</span>
                    </div>
                    <div id="cli-output" class="bg-slate-900 dark:bg-black p-6 font-mono text-xs text-green-400 max-h-[500px] overflow-y-auto whitespace-pre-wrap">
                        <div class="text-slate-500">Waiting for CLI output...</div>
                    </div>
                </div>

                <!-- Event Log / Recent Activity -->
                <div class="rounded-xl border border-slate-200 dark:border-border-dark bg-white dark:bg-surface-dark shadow-sm">
                    <div class="px-6 py-4 border-b border-slate-200 dark:border-border-dark flex justify-between items-center">
                        <h3 class="font-bold text-slate-900 dark:text-white">Recent LoRa Events</h3>
                        <span id="event-count" class="text-xs font-medium text-primary">0 events</span>
                    </div>
                    <div id="event-log" class="divide-y divide-slate-100 dark:divide-border-dark/50 max-h-[400px] overflow-y-auto">
                        <!-- Events will be inserted here -->
                        <div class="px-6 py-8 text-center text-slate-400">
                            <span class="material-symbols-outlined text-4xl mb-2">playlist_remove</span>
                            <p class="text-sm">No events yet. Waiting for transmission to start...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // ===== Configuration =====
        // å‹•æ…‹ API URL é…ç½® - æ”¯æ´ä¸‰ç¨®æ–¹å¼ï¼š
        // 1. URL åƒæ•¸ï¼š?api=http://192.168.1.100:3000
        // 2. è‡ªå‹•æª¢æ¸¬ï¼šä½¿ç”¨ç•¶å‰é é¢çš„ hostnameï¼ˆé©åˆåŒä¸€è¨­å‚™ï¼‰
        // 3. é è¨­ï¼šlocalhost
        function getApiUrl() {
            const params = new URLSearchParams(window.location.search);
            const apiParam = params.get('api');

            if (apiParam) {
                // æ–¹å¼ 1: å¾ž URL åƒæ•¸ç²å–
                console.log('ðŸ“ Using API from URL parameter:', apiParam);
                return `${apiParam}/status`;
            } else if (window.location.hostname !== '' && window.location.hostname !== 'localhost') {
                // æ–¹å¼ 2: è‡ªå‹•ä½¿ç”¨ç•¶å‰ hostnameï¼ˆç•¶å¾žç¶²è·¯è¨ªå•æ™‚ï¼‰
                const apiUrl = `http://${window.location.hostname}:3000/status`;
                console.log('ðŸ“ Auto-detected API URL:', apiUrl);
                return apiUrl;
            } else {
                // æ–¹å¼ 3: é è¨­ä½¿ç”¨ localhost
                console.log('ðŸ“ Using default localhost API');
                return 'http://127.0.0.1:3000/status';
            }
        }

        const API_URL = getApiUrl();
        const UPDATE_INTERVAL = 1000; // 1 second

        console.log('âœ… Dashboard initialized with API:', API_URL);

        // ===== State =====
        let previousEventCount = 0;
        let previousValues = {
            rssi: -80,
            totalBytes: 0,
            totalMessages: 0,
            totalRetries: 0
        };

        // ===== Utility: Count-up animation =====
        function animateValue(element, start, end, duration = 500) {
            const range = end - start;
            const increment = range / (duration / 16);
            let current = start;

            const timer = setInterval(() => {
                current += increment;
                if ((increment > 0 && current >= end) || (increment < 0 && current <= end)) {
                    current = end;
                    clearInterval(timer);
                }
                element.textContent = Math.round(current).toLocaleString();
            }, 16);
        }

        // ===== Utility: Escape HTML =====
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // ===== Format Event for Display =====
        function formatEvent(event) {
            const time = new Date().toLocaleTimeString('en-US', { hour12: false });
            let type = '', icon = '', details = '', color = 'slate';

            if (event.TransmitStart) {
                const e = event.TransmitStart;
                type = 'START';
                icon = 'radio_button_checked';
                color = 'blue';
                details = `${e.from} â†’ ${e.to} | ${e.message_type} | ${e.total_bytes}B (${e.fragments} fragments)`;
            } else if (event.TransmitFragment) {
                const e = event.TransmitFragment;
                type = 'FRAGMENT';
                icon = 'attachment';
                color = 'slate';
                details = `Fragment ${e.fragment_id + 1}/${e.total_fragments} | ${e.bytes} bytes`;
            } else if (event.PacketLost) {
                const e = event.PacketLost;
                type = 'LOST';
                icon = 'error';
                color = 'orange';
                details = `Fragment ${e.fragment_id} lost | Retry attempt ${e.retry_count + 1}`;
            } else if (event.RetrySuccess) {
                const e = event.RetrySuccess;
                type = 'RETRY OK';
                icon = 'refresh';
                color = 'green';
                details = `Fragment ${e.fragment_id} recovered after ${e.retry_count} retries`;
            } else if (event.TransmitComplete) {
                const e = event.TransmitComplete;
                type = 'COMPLETE';
                icon = 'check_circle';
                color = 'green';
                details = `Completed in ${e.total_time_ms}ms | ${e.retries} retries`;
            }

            return { type, icon, details, time, color };
        }

        // ===== Update Dashboard =====
        async function updateDashboard() {
            try {
                const response = await fetch(API_URL);

                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }

                const data = await response.json();

                // Update connection status
                document.getElementById('connection-badge').innerHTML = `
                    <span class="inline-block w-1.5 h-1.5 bg-green-500 rounded-full mr-1 pulse-green"></span>
                    CONNECTED
                `;
                document.getElementById('connection-badge').className = 'px-2 py-0.5 rounded text-[11px] font-bold bg-green-500/10 text-green-500 border border-green-500/20';

                // Update phase
                const phaseText = data.current_phase.replace(/_/g, ' ').toUpperCase();
                document.getElementById('current-phase').textContent = phaseText;

                // Update phase description
                const phaseDescriptions = {
                    'IDLE': 'Ready to initiate threshold signature generation.',
                    'KEYGEN': 'Generating threshold keys using trusted dealer...',
                    'ROUND1': 'Signers generating nonce commitments...',
                    'ROUND1COMMITMENT': 'Broadcasting Round 1 commitments...',
                    'SIGNINGPACKAGE': 'Coordinator creating signing package...',
                    'ROUND2': 'Signers generating signature shares...',
                    'ROUND2SIGNATURESHARE': 'Broadcasting Round 2 signature shares...',
                    'AGGREGATING': 'Coordinator aggregating signature shares...',
                    'FINALSIGNATURE': 'Threshold signature complete! Broadcasting final signature...',
                    'VERIFIED': 'Signature verified successfully!'
                };
                document.getElementById('phase-description').textContent = phaseDescriptions[phaseText] || 'Processing...';

                // Update progress
                const progress = Math.round(data.progress * 100);
                document.getElementById('progress-text').textContent = progress + '%';
                document.getElementById('progress-fill').style.width = progress + '%';

                // Update RSSI
                const rssiElement = document.getElementById('rssi-value');
                if (data.rssi !== previousValues.rssi) {
                    animateValue(rssiElement, previousValues.rssi, data.rssi);
                    previousValues.rssi = data.rssi;
                }
                document.getElementById('header-rssi').textContent = data.rssi + ' dBm';

                // Update total bytes
                const bytesElement = document.getElementById('total-bytes');
                if (data.total_bytes !== previousValues.totalBytes) {
                    animateValue(bytesElement, previousValues.totalBytes, data.total_bytes);
                    previousValues.totalBytes = data.total_bytes;
                }
                document.getElementById('total-bytes-inline').textContent = data.total_bytes.toLocaleString();

                // Update packet loss (retries)
                document.getElementById('packet-loss').textContent = data.total_retries;

                // Update statistics
                const messagesElement = document.getElementById('total-messages');
                if (data.total_messages !== previousValues.totalMessages) {
                    animateValue(messagesElement, previousValues.totalMessages, data.total_messages);
                    previousValues.totalMessages = data.total_messages;
                }
                document.getElementById('total-messages-inline').textContent = data.total_messages;

                const retriesElement = document.getElementById('total-retries');
                if (data.total_retries !== previousValues.totalRetries) {
                    animateValue(retriesElement, previousValues.totalRetries, data.total_retries);
                    previousValues.totalRetries = data.total_retries;
                }

                // Calculate success rate
                const successRate = data.total_messages > 0
                    ? Math.round((1 - data.total_retries / (data.total_messages * 3)) * 100)
                    : 100;
                document.getElementById('success-rate').textContent = successRate + '%';

                // Calculate average latency
                const avgLatency = data.total_messages > 0 ? 500 : 0;
                document.getElementById('avg-latency').textContent = avgLatency + 'ms';
                document.getElementById('header-latency').textContent = avgLatency + 'ms';

                // Update event log
                if (data.recent_events && data.recent_events.length > 0) {
                    const eventLog = document.getElementById('event-log');
                    document.getElementById('event-count').textContent = `${data.recent_events.length} events`;

                    if (data.recent_events.length !== previousEventCount) {
                        // Clear and rebuild
                        eventLog.innerHTML = '';

                        // Show last 20 events (reversed)
                        const eventsToShow = data.recent_events.slice(-20).reverse();
                        eventsToShow.forEach((event, index) => {
                            const formatted = formatEvent(event);

                            const colorClasses = {
                                'blue': 'bg-blue-500/10 text-blue-500 border-blue-500/20',
                                'green': 'bg-green-500/10 text-green-500 border-green-500/20',
                                'orange': 'bg-orange-500/10 text-orange-500 border-orange-500/20',
                                'slate': 'bg-slate-500/10 text-slate-500 border-slate-500/20'
                            };

                            const eventDiv = document.createElement('div');
                            eventDiv.className = `px-6 py-4 flex items-center justify-between hover:bg-slate-50 dark:hover:bg-background-dark/50 transition-colors ${index === 0 ? 'new-event' : ''}`;

                            eventDiv.innerHTML = `
                                <div class="flex items-center gap-4">
                                    <div class="w-8 h-8 rounded-lg ${colorClasses[formatted.color]} flex items-center justify-center shrink-0">
                                        <span class="material-symbols-outlined text-[18px]">${formatted.icon}</span>
                                    </div>
                                    <div class="flex flex-col">
                                        <div class="flex items-center gap-2">
                                            <span class="text-xs font-bold ${colorClasses[formatted.color].split(' ')[1]} border px-1.5 py-0.5 rounded">${formatted.type}</span>
                                        </div>
                                        <span class="text-sm font-medium text-slate-900 dark:text-white mt-1">${formatted.details}</span>
                                    </div>
                                </div>
                                <span class="text-xs font-mono text-slate-400">${formatted.time}</span>
                            `;

                            eventLog.appendChild(eventDiv);
                        });

                        previousEventCount = data.recent_events.length;
                    }
                }

                // Update CLI output
                if (data.cli_output && data.cli_output.length > 0) {
                    const cliOutput = document.getElementById('cli-output');
                    const cliLineCount = document.getElementById('cli-line-count');

                    // Update line count
                    cliLineCount.textContent = `${data.cli_output.length} lines`;

                    // Update CLI output content
                    cliOutput.innerHTML = data.cli_output.map(line =>
                        `<div class="leading-relaxed">${escapeHtml(line)}</div>`
                    ).join('');

                    // Auto-scroll to bottom
                    cliOutput.scrollTop = cliOutput.scrollHeight;
                }

            } catch (error) {
                console.error('Failed to fetch status:', error);
                document.getElementById('connection-badge').innerHTML = `
                    <span class="inline-block w-1.5 h-1.5 bg-red-500 rounded-full mr-1"></span>
                    DISCONNECTED
                `;
                document.getElementById('connection-badge').className = 'px-2 py-0.5 rounded text-[11px] font-bold bg-red-500/10 text-red-500 border border-red-500/20';
            }
        }

        // ===== Initialize =====
        console.log('%cðŸš€ FROST-T Professional Dashboard', 'color: #19e66b; font-size: 16px; font-weight: bold;');
        console.log('%cAPI Endpoint:', 'color: #3b82f6', API_URL);
        console.log('%cUpdate Interval:', 'color: #8b5cf6', UPDATE_INTERVAL + 'ms');

        // Start periodic updates
        updateDashboard();
        setInterval(updateDashboard, UPDATE_INTERVAL);
    </script>
</body>
</html>
